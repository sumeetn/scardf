#summary API for querying RDF graphs with Sparql

*Note*: Check out the data for the examples at [ExampleData] page.

== Select query ==

SELECT allows ORDER BY, LIMIT and OFFSET modifiers to be added.

{{{
val person, height = new QVar
val selectPersonsByHeight = ( Sparql 
  select( person, height ) 
    where( (person, RDF.Type, Person), (person, Height, height) )
    orderBy( asc( height ) )
    limit 2
    offset 1
)
}}}

This will create a SPARQL query like this one:
{{{
SELECT ?v1 ?v2 
  WHERE { 
    ?v1 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://person.eg#Person>.
    ?v1 <http://person.eg#Height> ?v2. 
  }
  ORDER BY ASC( ?v2 )
  LIMIT 2
  OFFSET 1
}}}

Select queries get executed by calling method `.from( Model )`.
You can test the solutions of the query as a list of maps:
{{{
(selectPersonsByHeight from model).solutions == List(
  Map( person -> anna, height -> Lit(107) ), 
  Map( person -> jane, height -> Lit(150) )
)
}}}


== Query modifiers ==

Enclose variable list in `distinct` or `reduced` to include these modifiers into the query:

{{{
val person, hobby = new QVar
val q = Sparql select distinct( hobby ) where( (person, Likes, hobby) )
}}}

Object `q` will construct a SPARQL query equivalent to this one:

{{{
SELECT DISTINCT ?v2 WHERE { ?v1 <http://person.eg#Likes> ?v2. }
}}}


== Special select expressions ==

When you are selecting a single variable, you can use a predefined one called `X`. 
This query variable is already expected in some special select expressions, 
that provide a more direct access to objects in the solution(s).

When you expect at most one solution to the query, use `selectX` method with a node converter.
This will give you a appropriately typed `Option`:
{{{
Sparql selectX asRes where( (X, Likes, Science) ) from model == Some( jdoe )
Sparql selectX asInt where( (jane, Height, X) ) from model == Some( 150 )
Sparql selectX asInt where( (jane, Weight, X) ) from model == None
}}}

You can use `selectAllX` for multiple-solutions queries. 
The following example yields an iterator of Res objects:
{{{
Sparql selectAllX asRes where( (X, Likes, Swimming) ) from model
}}}

